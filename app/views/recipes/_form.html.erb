<%= nested_form_for @recipe do |f| %>
  <% if @recipe.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@recipe.errors.count, "error") %> prohibited
      this recipe from being saved:</h2>
    <ul>
    <% @recipe.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
  <% end %>
  
  <%= @recipe.inspect %>
  <%= @recipe.ingredient_quantities.inspect %>
  
  <p>
    <%= f.label :name %><br>
    <%= f.text_field :name %>
  </p>
 
  <p>
    <%= f.label :description %><br>
    <%= f.text_area :description %>
  </p>
Links:
	<%= f.fields_for :links %>
	<p><%= f.link_to_add "Add a link", :links %></p>


<table class='gridtable' id="ingredients">
	<caption>Ingredients</caption>
	<thead>
		<tr>
			<th style="width:50px">Quantity</th>
			<th style="width:100px">Ingredient</th>
			<th style="width:200px">Preparation</th>
		</tr>
	</thead>
 <%= f.fields_for :ingredient_quantities, :wrapper => false %>
</table>
<p>
	
	<%= f.link_to_add "Add an Ingredient", 
  					:ingredient_quantities,
  					:data => { :target => "#ingredients" } %>
 
   
</p>

<table class='gridtable' id="instructions">
	<caption>Instructions</caption>
	<thead>
		<tr>
			<th style="width:50px">Step #</th>
			<th style="width:300px">Instruction</th>
		</tr>
	</thead>
 <%= f.fields_for :instructions, :wrapper => false %>
</table>
	<p>
<%= f.link_to_add "Add an instruction", 
  					:instructions,
  					:data => { :target => "#instructions" } %>
	</p>
 
    <%= f.submit %>
 
<% end %>
